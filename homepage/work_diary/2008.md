---
layout: post
title: "Work diary on 2008"
description: ""
---

#### 2008-01-31
1. 编写DrawTrace曲线
2. 更新OT8800至版本2.0018，两台

#### 2008-01-30
1. 编写DrawTrace曲线

#### 2008-01-29
1. 更新OT8800从2.0015至2.0017，并更新OS，共12台

#### 2008-01-28
1. 更新OT8800 从2.0015至2.0017，并更新OS，该OS应该修正电池问题的

#### 2008-01-25
1. MoveWindow(Left,Top,Width,Height);  
2. 测试新购买的6个U盘，有3个好用，有三个不好用！

#### 2008-01-24
1. 更新厦门寄回来的6台OT8800，

#### 2008-01-23
1. 检查更新寄回来的4台OT8800，成功解决屏幕光笔不好使的问题，原因是LCD的高压输入
   电源线的干扰，所以把该线布好，尽可能的远离LCD屏幕就可以解决问题。
2. 检查电池，这4台也是不良的。版本从2.0010更新到2.0015

#### 2008-01-22
1. 任务（顾）编写TraceView项目，对话框显示曲线，并有打印功能
2. VS2005加入消息方法：打开属性面板，点击消息按钮,如下图所示

#### 2008-01-21
1. 更新OT-8800Mini OTDR版本至2.0015中文版
2. 编写好客户用的更新软件的说明文档

#### 2008-01-18
1. 编写查看OT-8800 Mini OTDR版本SOP(20080118).doc
2. 继续使用bitfontcreator编写汉字对应的编码15x16宋粗体10号 24x24宋粗体14号
3. 查看UFOAPnet

#### 2008-01-17
1. 分析UFOAPnet
2. Bitfontcreator

#### 2008-01-16
1. 分析UFOAPnet
2. bitfontcreate

#### 2008-01-15
1. 写了封Email给Herman，作了个简短的工作汇报，遇到了问题，希望能在他那得到些方向性的指导
2. 今天先暂时搁下MINI OTDR数据运算的分析，先着手分析下顾给的TCP型互联网光纤检测代码 

#### 2008-01-14
1． 继续study数据流程，避开难点，寻找其他突破点
2． 找出了去噪声的地方，以及明白怎么去掉噪声
3． 找出了得到真正的m_pBuf的地方，就是CreateDisplayBuffer函数
4． 不明白的是，为什么要根据m_lSaveRatio来修改m_pBuf，为什么要修改m_pBuf
5． 从value`>>`6到得到m_pBuf中间有太多的谜团，无法解答！！！

#### 2008-01-13
1． 今天来加班，希望能把问题给弄清楚
2． USB OTDR操作原理（通过安装UFO的驱动获得pdf文件）

OTDR操作原理：  
OTDR的工作方式类似脉冲式雷达。  
首先它发出以一束激光脉冲波射入已插入端口的光纤，然后脉冲波在光纤中向  
下传输，并不断的散射和反射。当光脉冲返回OTDR时，检波器(APD)获得所有的  
被散射或反射的光能量APD信号的持续时间，相应为散射或反射光能量在光纤中  
 (向左和向前)两次传输。  

一旦PC机开始发出运行要求,USB OTDR的处理器便通知二极管发出短脉冲波(通  
常为ns或us)，然后通过光纤耦合器进入待测光纤；当它通过光纤时，一部分的  
光被光纤发射或散射并返回USB OTDR，被检波器(APD)获得。USB OTDR将光信号  
转换成电压信号，再通过A/D(模拟信号/数字信号)转换器转换为数字信号，然  
后存储在随机存储器中。该操作重复1024次，再将1024次的平均值存储于随机  
存储器中，结果经USB连接线传给电脑处理并显示。  

#### 2008-01-11
1． 分析数据
2． 终于有了很大的进展，从原始数据ScanData到lpBufRaw的数据变换过程已经基本清楚
3． 很不明白value`>>`6，这样的操作的意义所在？？？？？

#### 2008-01-10
1． 更新了3台MINI，一台U盘更新失败
2． 追踪分析数据

#### 2008-01-09
1． 更新了2台MINI，在更新过程中发现了一个bug，就是当U盘的根目录下没有UFO文件，
    或者该UFO文件内没有UFO.exe和OTDR.dll文件时，就算更新程序的时候在MINI的USB
	接口插入U盘，在更新软件对话框中的按钮“从U盘更新软件”也是处于不可用状态。
	(由于没有注意到这个细节，所以之前写的那些更新程序的档案都要修改)
2． 继续数据分析，仍然不明白为什么要循环32次！

#### 2008-01-08
1． 早上给电话william，告诉昨天烧了电源板的事
2． 顾给了William的回复：第一，把烧坏电源板的OP写成文档提交给William，第二，把更
    新OS和程序的步骤写成SOP档，并加入更新时候需垫上塑料薄膜防止刮花防止短路的步
	骤，还要加上更新OS和程序完后要进行光纤测量的步骤，保存测量的数据
3． 写了两份档案“烧坏MINI电源板的OP(20080108).doc”和“更新MINI OTDR程序和OS 的SOP(20080108).doc”
4． 增加了一份excel档案：“MINI OTDR程序和OS更新记录.xls”，其实应该早做记录了，就
    像写程序一样，要写log，以后出错就好处理了，容易定位到出错的地方！
5． 查看了一下“UFOAPNet”程序和晓鹏给的“光纤状态监测管理系统设计方案”，对它们之间
    的通讯稍微有点了解了。
6． 学习了UFOAPNet程序中的回调函数callback，Clist，setEvent

#### 2008-01-07
1. 搬家
2. 今天有更新MINI的任务，可能有9台左右
3. 计划好今年的任务计划，学习计划。
4. UFO tcp的问题：
   - 界面拖动会死机
   - 客户端扫描两到三次会死机
   - 客户端收到的数据比发送的少很多。待解决！！！
5. 郁闷，烧了一台MINI的电源板！！！
6. 更新了3台，第四台烧了电源板

#### 2008-01-04
1. 产生随机数 
2. 整理数据流程，整理关键的有疑惑的函数，整理数据从USB接收到display trace的过程中的数据变换点.
3. 有了解源码中每一个对话框以及every class的作用用途的想法！

#### 2008-01-03
  * 更新完昨天的OT8800Mini OTDR 
  * 整理程序流程图
    - 保存数据 
	- 打开sor档获取数据 
	- 打开sor档并LoadTraceData成功到m_pBuf后到显示trace中的取点算法过程 
	- 还有一个要认真研究的问题，就是怎么计算事件点的问题 

#### 2008-01-02
  * 数据传送中的函数调用流程
  * 数据传送过程 
  * 扫描时显示数据 
  * 扫描后保存数据 
  * 从扫描到sor档保存流程 
  * 获取事件数据 
